{% if results %}
<div class="results-container">
  {% for r in results %}
  <div class="product-result-card">
    <div class="product-name">{{ r.product.display_name if r.product.display_name else r.product.name }}</div>
    
    {% if r.prices %}
    <div class="prices-grid">
      {% for price in r.prices %}
      <div class="price-card {% if loop.index == 1 %}cheapest{% endif %}">
        <div class="price-card-header">
          <span class="provider-name">{{ price.provider_name }}</span>
          {% if loop.index == 1 and r.prices|length > 1 %}
          <span class="badge-cheapest">M√°s barato</span>
          {% endif %}
        </div>
        {% if price.provider_product_name %}
        <div class="provider-product-alias">{{ price.provider_product_name }}</div>
        {% endif %}
        <div class="price-row">
          <span class="price-label">Precio base:</span>
          <span class="price-value">${{ price.unit_price_fmt }}</span>
        </div>
        <div class="price-row price-final-row">
          <span class="price-label">Precio final:</span>
          <span class="price-value-final">${{ price.final_price_fmt }}</span>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="empty-price-msg">
      Este producto no tiene precios cargados.
    </div>
    {% endif %}
  </div>
  {% endfor %}
</div>
{% elif query %}
<div class="empty-state">
  <div style="font-size: 48px; margin-bottom: 12px;">üîç</div>
  <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">No se encontraron resultados</div>
  <div style="font-size: 14px;">Prob√° con otros t√©rminos de b√∫squeda para "{{ query }}"</div>
</div>
{% else %}
<div class="empty-state">
  <div style="font-size: 48px; margin-bottom: 12px;">üí°</div>
  <div style="font-size: 14px;">Ingres√° un t√©rmino para buscar productos</div>
</div>
{% endif %}

